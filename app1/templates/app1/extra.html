Ansar Ahmed
ULTIMATE DESIGN TECHNOLOGY LLP
EE
1173919287
1173919287
Mumbai
ansar@mail.com

make parameter dynamic


onsite user select delete button


************************

i want same pie chart like in this image and other so modify below code to make same page like this image

this is userenrolled model "class UserEnrolled(models.Model):
sr = models.AutoField(primary_key=True, unique=True)
picture = models.ImageField(upload_to='user_pictures/', blank=True, null=True)
name = models.CharField(max_length=255)
company_name = models.CharField(max_length=100)
job_role = models.CharField(max_length=100)
mycompany_id = models.CharField(max_length=10)
tag_id = models.CharField(max_length=50)
job_location = models.CharField(max_length=100)
orientation = models.FileField(upload_to='attachments/', blank=True, null=True, validators=[FileExtensionValidator(['jpeg', 'jpg'])])
facial_data = models.ImageField(upload_to=user_image_upload_path, blank=True, null=True, verbose_name='Facial Data')
my_comply = models.ImageField(upload_to='compliance_images/', blank=True, null=True)
expiry_date = models.DateField(blank=True, null=True)
status = models.CharField(max_length=100, choices=[
    ('active', 'Active'),
    ('inactive', 'Inactive'),
], default='active')
email = models.EmailField()
password = models.CharField(max_length=50)
site = models.ForeignKey('Site', on_delete=models.CASCADE, blank=True, null=True)
"
this is site model "class Site(models.Model):
picture = models.ImageField(upload_to='site_pictures/', blank=True, null=True)
name = models.CharField(max_length=100,unique=True)
location = models.CharField(max_length=100)

def save(self, *args, **kwargs):
    self.name = self.name.upper()
    super(Site, self).save(*args, **kwargs)
    
def __str__(self):
    return self.name"
this is view "def report_view(request):
site_name = request.GET.get('site_name') or request.session.get('site_name')
if site_name:
    request.session['site_name'] = site_name

try:
    active_users = UserEnrolled.objects.filter(status='active').count()
    inactive_users = UserEnrolled.objects.filter(status='inactive').count()

    labels = ['Active', 'Inactive']
    sizes = [active_users, inactive_users]
    colors = ['#4CAF50', '#F44336']

    plt.figure(figsize=(6, 6))
    plt.pie(sizes, labels=labels, colors=colors, autopct='%1.1f%%', startangle=140)
    plt.axis('equal')  # Equal aspect ratio ensures that pie is drawn as a circle.

    chart_filename = 'pie_chart.png'
    chart_path = os.path.join(settings.MEDIA_ROOT, chart_filename)
    plt.savefig(chart_path)

    chart_url = os.path.join(settings.MEDIA_URL, chart_filename)
    return render(request, 'app1/report.html', {'chart_url': chart_url, 'site_name': site_name})
except Exception as e:
    return render(request, 'app1/error.html', {'error_message': str(e), 'site_name': site_name})" 

this is report.html " <div class="container">
    <div class="chart-container">
        <img src="{{ chart_url }}" alt="User Status Pie Chart">
    </div>
</div>
"



import matplotlib.pyplot as plt
import os
from django.conf import settings
from django.shortcuts import render
from .models import UserEnrolled

def report_view(request):
    site_name = request.GET.get('site_name') or request.session.get('site_name')
    if site_name:
        request.session['site_name'] = site_name

    try:
        active_users = UserEnrolled.objects.filter(status='active').count()
        inactive_users = UserEnrolled.objects.filter(status='inactive').count()
        pending_users = UserEnrolled.objects.filter(status='pending').count()
        total_users = active_users + inactive_users + pending_users

        labels = ['Active', 'Inactive', 'Pending']
        sizes = [active_users, inactive_users, pending_users]
        colors = ['#4CAF50', '#F44336', '#FFEB3B']

        plt.figure(figsize=(8, 8))
        plt.pie(sizes, labels=labels, colors=colors, autopct='%1.1f%%', startangle=140, wedgeprops=dict(width=0.3))
        plt.text(0, 0, f'{total_users}', ha='center', va='center', fontsize=24)
        plt.axis('equal')  # Equal aspect ratio ensures that pie is drawn as a circle.

        chart_filename = 'pie_chart.png'
        chart_path = os.path.join(settings.MEDIA_ROOT, chart_filename)
        plt.savefig(chart_path)
        plt.close()

        chart_url = os.path.join(settings.MEDIA_URL, chart_filename)
        return render(request, 'app1/report.html', {'chart_url': chart_url, 'site_name': site_name, 
                                                    'active_users': active_users, 'inactive_users': inactive_users,
                                                    'pending_users': pending_users, 'total_users': total_users})
    except Exception as e:
        return render(request, 'app1/error.html', {'error_message': str(e), 'site_name': site_name})

    

**********************************

    
        .sidebar-logo img {
            max-width: 150px;
            /* Adjust the size as needed */
        }
    
    
        .sidebar {
            width: 225px;
            background-color: #fff;
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            padding-top: 10px;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
    
        .sidebar a {
            padding: 10px 15px;
            text-decoration: none;
            font-size: 16px;
            color: black;
            display: block;
            transition: 0.3s;
    
        }
    
        .sidebar a:hover {
            background-color: #fbfbfb;
        }
    
        .sidebar .user-info {
            margin: 40px 0;
            padding: 0 15px;
        }
    
        .sidebar .user-info img {
            width: 60px 0px;
            height: 60px;
            border-radius: 7%;
            margin-right: 65px;
        }
    
        .sidebar .user-info .user-details {
            display: flex;
            align-items: center;
        }
    
        .sidebar .user-info .user-details div {
            margin-left: 10px;
        }
    
 
        .sidebar a i {
            margin-right: 5px;
        }
    
        .dropdown a i {
            margin-right: 2px;
        }
    
        .nav a i {
            margin-right: 5px;
        }

        .sidebar a.activeLink,
        .sidebar a.activeLink:hover {
        color:  #071390 !important;
    }


   

    